!function(){var t,s,i,e,o;t=jQuery,e={"class":"snipe-lens",size:200,animation:null,image:null,cursor:"none",bounds:[],css:{borderRadius:200,width:200,height:200,border:"2px solid white",backgroundColor:"white",boxShadow:"0 0 10px #777, 0 0 8px black inset, 0 0 80px white inset"},zoomin:function(){},zoomout:function(){},zoommoved:function(){}},o={css:{position:"absolute",top:0,left:0,backgroundRepeat:"no-repeat"}},s=function(){function t(t,s,i,e){return this.top=t,this.right=s,this.bottom=i,this.left=e,this}return t.prototype.contains=function(t,s){return this.left<t&&t<this.right&&this.top<s&&s<this.bottom},t}(),i=function(){function i(s,i){var o=this;return this.el=s,null==i&&(i={}),this.body=t("body"),this.defaults=e,this.makeSettings(i),this.el.one("load",function(){return o.makeBounds()}).each(function(){return this.complete?t(this).load():void 0}),this.el.data("snipe",this),this.lens=t("<div>").addClass(this.settings["class"]).css("display","none").appendTo("body"),this.ratioX=1,this.ratioY=1,this.ratioEl=t("<img>").attr("src",this.settings.image),this.ratioEl.one("load",function(){return o.calculateRatio.call(o)}).each(function(){return this.complete?t(this).load():void 0}),this.el.bind("mousemove",function(t){return o.onMouseMove(t)}),this.el}return i.prototype.makeSettings=function(s){var i;return this.el.is("a")?(i=this.el.find("img:first"),this.defaults.image=s.image||this.el.attr("href")):(i=this.el.is("img")?this.el:this.el.find("img:first"),this.defaults.image=s.image||this.el.data("zoom")||this.el.attr("src")),this.el=i,this.defaults.css.backgroundImage="url("+this.defaults.image+")",this.defaults.css.cursor=s.cursor||this.defaults.cursor,this.settings=t.extend({},this.defaults,s,o),this.settings.css=t.extend({},this.defaults.css,s&&s.css,o.css)},i.prototype.makeBounds=function(){return this.offset=this.el.offset(),this.bounds=new s(this.offset.top,this.offset.left+this.el.width(),this.offset.top+this.el.height(),this.offset.left)},i.prototype.run=function(){return this.hide()},i.prototype.calculateRatio=function(){return this.ratioX=this.ratioEl[0].width/this.el[0].width,this.ratioY=this.ratioEl[0].height/this.el[0].height,this.ratioEl.remove(),this.lens.css(this.settings.css),this.run()},i.prototype.onMouseMove=function(t){var s,i;if(null!=this.bounds||!this.lens.not(":animated"))return this.bounds.contains(t.pageX,t.pageY)||this.hide(),s=-((t.pageX-this.offset.left)*this.ratioX-.5*this.settings.size),i=-((t.pageY-this.offset.top)*this.ratioY-.5*this.settings.size),this.lens.css({left:t.pageX-.5*this.settings.size,top:t.pageY-.5*this.settings.size,backgroundPosition:""+s+"px "+i+"px"})},i.prototype.show=function(t){var s=this;return null==t&&(t=!0),this.makeBounds(),this.el.unbind("mousemove"),this.el.unbind("mouseover"),this.body.bind("mousemove",function(t){return s.onMouseMove(t)}),this.lens.show().css({opacity:1,cursor:this.settings.css.cursor}),this},i.prototype.hide=function(t){var s=this;return null==t&&(t=!0),this.el.bind("mouseover",function(){return s.show()}),this.body.unbind("mousemove"),this.lens.css({opacity:0,cursor:"default"}).hide(),this},i}(),function(t){return t.fn.snipe=function(s){return this.each(function(){return t(this).data("snipe")||new i(t(this),s)})}}(jQuery)}.call(this);